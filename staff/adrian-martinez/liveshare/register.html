<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register User</title>
</head>
<body>
    <main class="main">
        <h1>Register</h1>

        <form action="" class="form">
            <label for="name">Name</label>
            <input type="text" id="name"/>

            <label for="birthdate">Birthdate</label>
            <input type="date" id="birthdate"/>

            <label for="username">Username</label>
            <input type="text" id="username"/>

            <label for="email">Correo</label>
            <input type="text" id="email"/>

            <label for="password">Contraseña</label>
            <input type="password" id="password"/>

            <button type="submit">Registrar</button><!-- onclick=onsubmit() -->
        </form>
        <a href="">Login</a>
    </main>
    <style>
        .main{
            padding-left: 20vw;
            padding-right: 20vw;
        }
        .form{
            display: flex;
            flex-direction: column;
        }
    </style>
    <script>
        var users = [];

        var form = document.querySelector(".form");

        form.onsubmit = function (event){
            
            event.preventDefault(); //Esto para evitar que le página se recargue al enviar el formulario

            //Cogemos el valor de los campos para pasárselo a la propiedad de un array de objetos de usuarios
           
            var nameInput = form.querySelector("#name");
            var name = nameInput.value; 

            var birthdateInput = form.querySelector("#birthdate");
            var birthdate = birthdateInput.value; 
            
            var usernameInput = form.querySelector("#username");
            var username = usernameInput.value;

            var emailInput = form.querySelector("#email");
            var email = emailInput.value;

            var passwordInput = form.querySelector("#password");
            var password = passwordInput.value;

            if(password.length < 8){

                throw new Error("Elija una contraseña con más de 8 caracteres"); //Excepción que ya te rompe el programa si se cumple
            }

            for(let i=0;i < users.length;i++){

                var user = users[i];
                if(user.email == email){

                    throw new Error("El usuario ya existe")
                }
            }
            var user = {
                    name: name,
                    birthdate: birthdate,
                    username: username,
                    email: email,
                    password: password
                }

            users[users.length] = user;

            console.log("USUARIO REGISTRADO");
        }
    </script>
</body>
</html>